import{o as u,a as x,aw as s,d as j,g as d,bt as G,c as J,b as m,w as t,f as n,ay as i,az as _,e as E,bu as O,aU as q,be as I,b0 as S,bb as D,ci as X,bi as Y,bj as Z,_ as ee,av as oe,aK as te,u as z,F as H,aE as N,n as ne,b5 as ae}from"./index-1691429277723.js";import{r as le,_ as se,a as ie,b as ue,c as ce}from"./index.vue_vue_type_script_setup_true_lang-16914292777233.js";import{a as re}from"./chat-1691429277723.js";import{N as L,_ as P}from"./Icon-1691429277723.js";import{_ as _e,a as pe}from"./Grid-1691429277723.js";import{_ as de}from"./Spin-1691429277723.js";import"./Scrollbar-1691429277723.js";import"./DataTable-1691429277723.js";import"./Dropdown-1691429277723.js";const me={class:"inline-block",viewBox:"0 0 32 32",width:"1em",height:"1em"},fe=s("path",{fill:"currentColor",d:"m24.778 21.42l-5.502-5.503l5.5-5.502l-2.827-2.83l-5.503 5.502l-5.502-5.502l-2.828 2.83l5.5 5.502l-5.5 5.502l2.83 2.828l5.5-5.502l5.5 5.502z"},null,-1),ve=[fe];function ge(r,w){return u(),x("svg",me,ve)}const he={name:"raphael-cross",render:ge},V=r=>(Y("data-v-8fb7b661"),r=r(),Z(),r),ye=["innerHTML"],xe=V(()=>s("strong",null,"轻应用名称：",-1)),we={style:{"align-items":"center"}},be={style:{float:"right"}},ke=V(()=>s("div",null,null,-1)),$e={style:{float:"right"}},Ce={key:0},ze={key:1},Be={key:2},Ae=V(()=>s("span",null,"一键复制",-1)),Me=j({__name:"index",props:{modal:{type:Boolean,default:!1},nowApp:{default:{}}},emits:["update:modal"],setup(r,{emit:w}){const f=r,e=d({question:"",is_me:!0,loading:!1,answer:"..."}),v=d(null),c=d(G.CancelToken.source()),B=()=>{var l,o;(l=v.value)==null||l.select(),document.execCommand("copy"),(o=window.$message)==null||o.success("复制成功")};function g(){e.value.question.trim()&&(e.value.loading=!0,e.value.is_me=!1,e.value.answer="正在生成中...",O.post("chat/app/",{msg:e.value.question,app_id:f.nowApp.id},{cancelToken:c.value.token,onDownloadProgress:l=>{e.value.answer=l.currentTarget.response,v.value&&v.value.scrollTo({top:1e5,behavior:"smooth"})}}).finally(()=>{e.value.loading=!1}))}const k=J({get(){return f.modal},set(l){w("update:modal",l)}});function A(){var l;(l=window.$dialog)==null||l.info({title:"提示",content:"请问确定要关闭吗？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{k.value=!1,e.value.is_me=!0,e.value.question="",e.value.answer="..."}})}return(l,o)=>{const h=L,b=q,M=P,$=I,C=he,y=S,T=D,U=X;return u(),m(U,{show:k.value,"onUpdate:show":o[4]||(o[4]=p=>k.value=p),closable:!1,preset:"card","mask-closable":!1,"auto-focus":!1,style:{"max-width":"600px"},onClose:A},{footer:t(()=>[n($,{justify:"end",align:"center"},{default:t(()=>[s("div",we,[s("small",be,[i(" 本次消耗 "),n(b,{type:"success",size:"small"},{default:t(()=>[i(_(r.nowApp.usage),1)]),_:1}),i(" 积分 ")]),ke,s("small",$e,[i(" 本应用由 "),n(b,{type:"info",size:"small"},{default:t(()=>[i(_(r.nowApp.author),1)]),_:1}),i(" 提供 ")])]),e.value.answer!=="..."&&e.value.is_me===!1&&e.value.loading===!1?(u(),m(y,{key:0,type:"info",onClick:o[2]||(o[2]=p=>e.value.is_me=!0)},{default:t(()=>[i(" 重新编辑 ")]),_:1})):E("",!0),n(y,{type:"primary",loading:e.value.loading,onClick:g},{default:t(()=>[e.value.is_me===!0?(u(),x("span",Ce,"开始干活")):e.value.is_me===!1&&e.value.loading===!0?(u(),x("span",ze,"正在生成")):e.value.is_me===!1&&e.value.loading===!1?(u(),x("span",Be,"重新生成")):E("",!0)]),_:1},8,["loading"]),e.value.is_me===!1&&e.value.loading===!1?(u(),m(y,{key:1,type:"primary",loading:e.value.loading,onClick:o[3]||(o[3]=p=>B())},{default:t(()=>[Ae]),_:1},8,["loading"])):E("",!0)]),_:1})]),default:t(()=>[n($,{style:{"flex-flow":"nowrap","align-items":"center"}},{default:t(()=>[n(h,{size:"50",style:{"font-style":"normal"}},{default:t(()=>[s("div",{innerHTML:r.nowApp.icon},null,8,ye)]),_:1}),n($,{vertical:""},{default:t(()=>[s("span",null,[xe,n(b,{type:"primary"},{default:t(()=>[i(_(r.nowApp.name),1)]),_:1})]),n(M,{"line-clamp":2},{default:t(()=>[i(_(r.nowApp.description),1)]),_:1})]),_:1}),n(y,{circle:"",style:{position:"absolute",right:"10px",top:"10px"},onClick:A},{icon:t(()=>[n(C)]),_:1})]),_:1}),e.value.is_me?(u(),m(T,{key:0,value:e.value.question,"onUpdate:value":o[0]||(o[0]=p=>e.value.question=p),autosize:{minRows:3},class:"mt-3 is-me",type:"textarea"},null,8,["value"])):(u(),m(T,{key:1,ref_key:"answerBox",ref:v,value:e.value.answer,"onUpdate:value":o[1]||(o[1]=p=>e.value.answer=p),class:"mt-3 not-me",readonly:"",autosize:{minRows:3,maxRows:10},"show-count":"",loading:e.value.loading,type:"textarea"},null,8,["value","loading"]))]),_:1},8,["show"])}}}),Te=ee(Me,[["__scopeId","data-v-8fb7b661"]]),Ee={class:"inline-block",viewBox:"0 0 36 36",width:"1em",height:"1em"},Ue=oe('<path fill="#5C913B" d="M2 11c-2 0-2 2-2 2v21s0 2 2 2h32c2 0 2-2 2-2V13s0-2-2-2H2z"></path><path fill="#A7D28B" d="M2 6C0 6 0 8 0 8v20s0 2 2 2h32c2 0 2-2 2-2V8s0-2-2-2H2z"></path><circle cx="25" cy="18" r="6.5" fill="#77B255"></circle><path fill="#5C913B" d="M33 28.5H3c-.827 0-1.5-.673-1.5-1.5V9c0-.827.673-1.5 1.5-1.5h30c.827 0 1.5.673 1.5 1.5v18c0 .827-.673 1.5-1.5 1.5zM3 8.5a.5.5 0 0 0-.5.5v18c0 .275.225.5.5.5h30c.275 0 .5-.225.5-.5V9a.5.5 0 0 0-.5-.5H3z"></path><path fill="#FFE8B6" d="M14 6h8v24.062h-8z"></path><path fill="#FFAC33" d="M14 30h8v6h-8z"></path><path fill="#5C913B" d="M11.81 20.023c0-2.979-5.493-2.785-5.493-4.584c0-.871.833-1.296 1.799-1.296c1.625 0 1.914 1.044 2.65 1.044c.521 0 .772-.328.772-.696c0-.856-1.296-1.502-2.539-1.726v-.825a.932.932 0 1 0-1.864 0v.853c-1.354.31-2.521 1.25-2.521 2.781c0 2.862 5.493 2.746 5.493 4.758c0 .695-.754 1.391-1.992 1.391c-1.857 0-2.476-1.257-3.229-1.257c-.368 0-.696.309-.696.775c0 .741 1.24 1.631 2.947 1.881l-.001.004v.934a.933.933 0 0 0 1.864 0v-.934c0-.01-.005-.019-.006-.028c1.535-.287 2.816-1.286 2.816-3.075z"></path>',7),Ve=[Ue];function Fe(r,w){return u(),x("svg",Ee,Ve)}const He={name:"twemoji-dollar-banknote",render:Fe},Ne={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-12 text-center lg:pt-12"},je={class:"font-display mx-auto max-w-4xl text-5xl font-medium tracking-tight sm:text-7xl"},qe={class:"whitespace-nowrap"},Ie={class:"text-4xl sm:text-7xl",style:{color:"#1890ff"}},Se={class:"mx-auto mt-6 max-w-2xl text-lg"},De={class:"mt-10 flex justify-center gap-x-6"},Le=["innerHTML"],Pe={style:{"margin-top":"10px"}},eo=j({__name:"index",setup(r){const{name:w}=te(),f=d([]),e=d([]),v=d([]),c=d({global:!0,modal:!1,create:!1,my:!1,upload:!1}),B=d({}),g=d(""),k=()=>{e.value=[],f.value.forEach(l=>{l.tools.forEach(o=>{g.value!==""&&o.name.includes(g.value)&&e.value.push(o)})}),g.value===""&&f.value.forEach(l=>{l.tools.forEach(o=>{e.value.length<16&&e.value.push(o)})})},A=l=>{e.value=[],f.value.forEach(o=>{o.id===l&&o.tools.forEach(h=>{e.value.push(h)})})};return re().then(l=>{f.value=l.data,f.value.forEach(o=>{o.tools.forEach(h=>{e.value.length<16&&e.value.push(h)}),v.value.push({label:o.name,value:o.id,color:le()})}),c.value.global=!1}),(l,o)=>{const h=ue,b=S,M=ce,$=D,C=q,y=I,T=L,U=P,p=He,R=ae,K=_e,Q=pe,W=de;return u(),m(W,{show:c.value.global,class:"mt-5 full mx-auto max-w-7xl sm:px-6 lg:px-8"},{default:t(()=>[s("div",Ne,[s("h1",je,[i(" 创建 "),s("span",qe,[s("span",Ie,_(z(w)),1)]),i(" 轻应用 ")]),s("p",Se,"创建您的轻应用，共建"+_(z(w))+"生态",1),s("div",De,[n(b,{type:"primary",style:{color:"white"},onClick:o[0]||(o[0]=a=>c.value.create=!0)},{icon:t(()=>[n(h)]),default:t(()=>[i(" 创建应用 ")]),_:1}),n(b,{type:"primary",style:{color:"white"},onClick:o[1]||(o[1]=a=>c.value.my=!0)},{icon:t(()=>[n(M)]),default:t(()=>[i(" 我的应用 ")]),_:1})])]),n($,{value:g.value,"onUpdate:value":o[2]||(o[2]=a=>g.value=a),size:"large",round:"",placeholder:"请输入关键词搜索",onInput:k},null,8,["value"]),c.value.global?E("",!0):(u(),m(y,{key:0,class:"mt-6"},{default:t(()=>[(u(!0),x(H,null,N(v.value,(a,F)=>(u(),m(C,{key:F,round:"",size:"large",style:ne([{color:a.color},{cursor:"pointer"}]),onClick:Re=>A(a.value)},{default:t(()=>[i(_(a.label),1)]),_:2},1032,["style","onClick"]))),128))]),_:1})),n(Q,{"item-responsive":"",cols:4,"x-gap":"20","y-gap":"25",style:{"text-align":"center","margin-top":"2rem"}},{default:t(()=>[(u(!0),x(H,null,N(e.value,a=>(u(),m(K,{key:a.id,span:"4 400:2 600:1 800:1"},{default:t(()=>[n(R,{hoverable:"",style:{position:"relative",cursor:"pointer","user-select":"none"},class:"card-background",onClick:F=>{B.value=a,a.name.toUpperCase().includes("PDF")?c.value.upload=!0:c.value.modal=!0}},{default:t(()=>[n(T,{size:"35",style:{position:"absolute","font-style":"normal",top:"0",left:"50%",transform:"translate(-50%, -50%)"}},{default:t(()=>[s("div",{innerHTML:a.icon},null,8,Le)]),_:2},1024),s("div",Pe,_(a.name),1),n(U,{"line-clamp":1},{default:t(()=>[s("small",null,_(a.description),1)]),_:2},1024),n(y,{justify:"space-evenly",style:{"flex-flow":"nowrap"}},{default:t(()=>[n(C,{size:"small",bordered:!1,type:"success"},{icon:t(()=>[n(p)]),default:t(()=>[i(" "+_(a.usage)+"⚡️/次 ",1)]),_:2},1024),n(C,{size:"small",bordered:!1,type:"info"},{icon:t(()=>[n(M)]),default:t(()=>[i(" "+_(a.author),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),n(z(Te),{"now-app":B.value,modal:c.value.modal,"onUpdate:modal":o[3]||(o[3]=a=>c.value.modal=a)},null,8,["now-app","modal"]),n(z(se),{categories:v.value,modal:c.value.create,"onUpdate:modal":o[4]||(o[4]=a=>c.value.create=a)},null,8,["categories","modal"]),n(z(ie),{modal:c.value.my,"onUpdate:modal":o[5]||(o[5]=a=>c.value.my=a)},null,8,["modal"])]),_:1},8,["show"])}}});export{eo as default};

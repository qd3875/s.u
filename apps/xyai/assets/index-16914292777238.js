import{y as pe,v as A,A as Z,d as U,H as _e,J as X,b6 as fe,c as P,M as j,O as me,q as he,o as y,a as B,aw as s,b7 as W,f as e,u as l,aJ as q,aC as O,aA as ee,g as S,aY as D,Q as ve,b as R,w as n,ay as v,az as M,b8 as I,e as E,b9 as T,ba as te,bb as F,bc as oe,bd as Q,b0 as G,be as ne,bf as J,aK as K,aQ as ge,aR as we,bg as be,bh as ye,bi as xe,bj as ke,_ as se,bk as Ce,bl as $e,bm as ze,bn as Re,i as le,k as Se,bo as Ue,a6 as Le,aF as Me,n as Y,bp as Ie,b5 as Pe}from"./index-1691429277723.js";import{l as Te}from"./lodash-1691429277723.js";import{u as ae,V as re}from"./index-169142927772320.js";import{_ as Be}from"./Spin-1691429277723.js";import{_ as qe}from"./GradientText-1691429277723.js";import"./useLoading-1691429277723.js";const Ve=pe("h",`
 font-size: var(--n-font-size);
 font-weight: var(--n-font-weight);
 margin: var(--n-margin);
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[A("&:first-child",{marginTop:0}),Z("prefix-bar",{position:"relative",paddingLeft:"var(--n-prefix-width)"},[Z("align-text",{paddingLeft:0},[A("&::before",{left:"calc(-1 * var(--n-prefix-width))"})]),A("&::before",`
 content: "";
 width: var(--n-bar-width);
 border-radius: calc(var(--n-bar-width) / 2);
 transition: background-color .3s var(--n-bezier);
 left: 0;
 top: 0;
 bottom: 0;
 position: absolute;
 `),A("&::before",{backgroundColor:"var(--n-bar-color)"})])]),je=Object.assign(Object.assign({},X.props),{type:{type:String,default:"default"},prefix:String,alignText:Boolean}),V=c=>U({name:`H${c}`,props:je,setup(u){const{mergedClsPrefixRef:r,inlineThemeDisabled:f}=_e(u),m=X("Typography","-h",Ve,fe,u,r),g=P(()=>{const{type:w}=u,{common:{cubicBezierEaseInOut:t},self:{headerFontWeight:d,headerTextColor:o,[j("headerPrefixWidth",c)]:k,[j("headerFontSize",c)]:C,[j("headerMargin",c)]:z,[j("headerBarWidth",c)]:L,[j("headerBarColor",w)]:x}}=m.value;return{"--n-bezier":t,"--n-font-size":C,"--n-margin":z,"--n-bar-color":x,"--n-bar-width":L,"--n-font-weight":d,"--n-text-color":o,"--n-prefix-width":k}}),i=f?me(`h${c}`,P(()=>u.type[0]),g,u):void 0;return{mergedClsPrefix:r,cssVars:f?void 0:g,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){var u;const{prefix:r,alignText:f,mergedClsPrefix:m,cssVars:g,$slots:i}=this;return(u=this.onRender)===null||u===void 0||u.call(this),he(`h${c}`,{class:[`${m}-h`,`${m}-h${c}`,this.themeClass,{[`${m}-h--prefix-bar`]:r,[`${m}-h--align-text`]:f}],style:g},i)}});V("1");const He=V("2");V("3");V("4");V("5");V("6");const Ae={height:"1337",width:"1337"},Ee=s("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1),Oe={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},De=["stop-color"],Ge=["stop-color"],Ne=s("g",{opacity:"1"},[s("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1),We=U({__name:"CornerTop",props:{startColor:{default:"#28aff0"},endColor:{default:"#120fc4"}},setup(c){return(u,r)=>(y(),B("svg",Ae,[s("defs",null,[Ee,s("linearGradient",Oe,[s("stop",{offset:"0","stop-color":c.startColor,"stop-opacity":"1"},null,8,De),s("stop",{offset:"1","stop-color":c.endColor,"stop-opacity":"1"},null,8,Ge)])]),Ne]))}}),Fe={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",height:"896",width:"967.8852157128662"},Qe=s("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1),Je={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Ke=["stop-color"],Ze=["stop-color"],Ye=s("g",{opacity:"1"},[s("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1),Xe=U({__name:"CornerBottom",props:{startColor:{default:"#28aff0"},endColor:{default:"#120fc4"}},setup(c){return(u,r)=>(y(),B("svg",Fe,[s("defs",null,[Qe,s("linearGradient",Je,[s("stop",{offset:"0","stop-color":c.startColor,"stop-opacity":"1"},null,8,Ke),s("stop",{offset:"1","stop-color":c.endColor,"stop-opacity":"1"},null,8,Ze)])]),Ye]))}}),et={class:"absolute-lt z-1 wh-full overflow-hidden"},tt={class:"absolute -right-300px -top-900px <sm:(-right-100px -top-1170px)"},ot={class:"absolute -left-200px -bottom-400px <sm:(-left-100px -bottom-760px)"},nt=U({__name:"index",props:{themeColor:null},setup(c){const u=c,r=P(()=>W(u.themeColor,3)),f=P(()=>W(u.themeColor,6));return(m,g)=>(y(),B("div",et,[s("div",tt,[e(l(We),{"start-color":r.value,"end-color":f.value},null,8,["start-color","end-color"])]),s("div",ot,[e(l(Xe),{"start-color":f.value,"end-color":r.value},null,8,["start-color","end-color"])])]))}}),st={class:"flex-y-center justify-between"},lt=s("div",{class:"w-12px"},null,-1),at=s("div",{class:"w-12px"},null,-1),rt=U({__name:"index",setup(c){const u=q(),{login:r}=q(),{toLoginModule:f}=O(),m=ee(),g=S(),i=D({username:"",password:"",style:"username",ticket:m.query.ticket});ve(()=>{var d;m.query.ticket&&((d=window.$message)==null||d.success("欢迎使用微信扫码登录，第一次使用，请先登录原账号，或者注册新账号哦!"))});const w={password:T.pwd};async function t(){var d;q().resetAuthStore(),await((d=g.value)==null?void 0:d.validate()),r(i)}return(d,o)=>{const k=te,C=F,z=oe,L=Q,x=G,p=ne,a=J;return y(),R(a,{id:"wss",ref_key:"formRef",ref:g,model:i,rules:w,size:"large","show-label":!1},{default:n(()=>[e(L,{path:"username"},{default:n(()=>[e(z,null,{default:n(()=>[e(k,{value:i.style,"onUpdate:value":o[0]||(o[0]=_=>i.style=_),placeholder:"登录",style:{width:"120px"},options:[{label:"用户名",value:"username"},{label:"手机号",value:"phone"}]},null,8,["value"]),e(C,{value:i.username,"onUpdate:value":o[1]||(o[1]=_=>i.username=_),placeholder:i.style=="username"?"请输入用户名":"请输入手机号"},null,8,["value","placeholder"])]),_:1})]),_:1}),e(L,{path:"password"},{default:n(()=>[e(C,{value:i.password,"onUpdate:value":o[2]||(o[2]=_=>i.password=_),type:"password","show-password-on":"click",placeholder:"请输入密码"},null,8,["value"])]),_:1}),e(p,{vertical:!0,size:24},{default:n(()=>[e(x,{type:"primary",size:"large",block:!0,round:!0,loading:l(u).loginLoading,onClick:t},{default:n(()=>[v(" 确定 ")]),_:1},8,["loading"]),s("div",st,[i.ticket?E("",!0):(y(),R(x,{key:0,class:"flex-1",style:{"border-radius":"16px"},block:!0,onClick:o[3]||(o[3]=_=>l(f)("bind-wechat"))},{default:n(()=>[v(M(l(I)["bind-wechat"]),1)]),_:1})),lt,e(x,{class:"flex-1",style:{"border-radius":"16px"},block:!0,onClick:o[4]||(o[4]=_=>l(f)("reset-pwd"))},{default:n(()=>[v(M(l(I)["reset-pwd"]),1)]),_:1}),at,e(x,{class:"flex-1",style:{"border-radius":"16px"},block:!0,onClick:o[5]||(o[5]=_=>l(f)("register"))},{default:n(()=>[v(M(l(I).register),1)]),_:1})])]),_:1})]),_:1},8,["model"])}}}),ie=c=>(xe("data-v-b23bc49f"),c=c(),ke(),c),it={class:"flex-y-center w-full"},dt=ie(()=>s("div",{class:"w-18px"},null,-1)),ut={class:"flex-y-center justify-between"},ct=ie(()=>s("div",{class:"w-12px"},null,-1)),pt=U({__name:"index",setup(c){const{register_verify:u}=K(),{label:r,isCounting:f,loading:m,getSmsCode:g}=ae(),i=ee(),w=S(),t=D({username:"",email:"",phone:"",server:"",countrycode:"86",sms:"",from:"register",pwd:"",referred_username:i.query.code||"",token:"",error:"",agreement:!1}),d=async()=>{var p;await((p=w.value)==null?void 0:p.validate()),g(t)},{toLoginModule:o}=O(),{register:k}=q(),C=S(!1),z=S(!!i.query.code),L={phone:T.phone,username:be("请输入用户名"),pwd:T.pwd,token:T.token};async function x(){var p,a,_;await((p=w.value)==null?void 0:p.validate()),C.value=!0,t.sms===""&&u?(a=window.$message)==null||a.error("请先完成手机验证!"):t.agreement?await k({username:t.username,email:t.email,password:t.pwd,phone:t.phone,server:t.server,referred_username:t.referred_username,token:t.token,sms:t.sms}).finally(()=>{C.value=!1}):(_=window.$message)==null||_.error("请先同意协议!"),C.value=!1}return(p,a)=>{const _=F,$=Q,N=te,H=oe,b=G,de=ye,ue=ne,ce=J;return y(),R(ce,{ref_key:"formRef",ref:w,model:t,rules:L,"show-label":!1},{default:n(()=>[e($,{path:"username"},{default:n(()=>[e(_,{value:t.username,"onUpdate:value":a[0]||(a[0]=h=>t.username=h),minlength:"5",placeholder:"登录用户名"},null,8,["value"])]),_:1}),e($,{path:"pwd"},{default:n(()=>[e(_,{value:t.pwd,"onUpdate:value":a[1]||(a[1]=h=>t.pwd=h),type:"password","show-password-on":"click",placeholder:"密码"},null,8,["value"])]),_:1}),l(u)?(y(),R($,{key:0,path:"phone"},{default:n(()=>[e(H,null,{default:n(()=>[e(N,{value:t.countrycode,"onUpdate:value":a[2]||(a[2]=h=>t.countrycode=h),style:{width:"120px"},options:[{label:"中国",value:"86"}]},null,8,["value"]),e(_,{value:t.phone,"onUpdate:value":a[3]||(a[3]=h=>t.phone=h),placeholder:"手机号码"},null,8,["value"])]),_:1})]),_:1})):E("",!0),l(u)?(y(),R($,{key:1,path:"token"},{default:n(()=>[e(l(re),{server:t.server,token:t.token,"onUpdate:token":a[4]||(a[4]=h=>t.token=h),"onUpdate:server":a[5]||(a[5]=h=>t.server=h)},null,8,["server","token"])]),_:1})):E("",!0),l(u)?(y(),R($,{key:2,path:"sms"},{default:n(()=>[s("div",it,[e(_,{value:t.sms,"onUpdate:value":a[6]||(a[6]=h=>t.sms=h),placeholder:"短信验证码"},null,8,["value"]),dt,e(b,{size:"large",disabled:l(f),loading:l(m),onClick:d},{default:n(()=>[v(M(l(r)),1)]),_:1},8,["disabled","loading"])])]),_:1})):E("",!0),ge(e($,{path:"code"},{default:n(()=>[e(_,{value:t.referred_username,"onUpdate:value":a[7]||(a[7]=h=>t.referred_username=h),readonly:z.value,placeholder:"可选填写邀请码"},{prefix:n(()=>[v(" 邀请码：")]),_:1},8,["value","readonly"])]),_:1},512),[[we,!z.value]]),e(ue,{vertical:!0,size:18},{default:n(()=>[e(de,{value:t.agreement,"onUpdate:value":a[8]||(a[8]=h=>t.agreement=h)},null,8,["value"]),s("div",ut,[e(b,{class:"flex-1",loading:C.value,type:"primary",size:"large",block:!0,round:!0,onClick:x},{default:n(()=>[v(" 确定 ")]),_:1},8,["loading"]),ct,e(b,{size:"large",class:"flex-1",block:!0,round:!0,onClick:a[9]||(a[9]=h=>l(o)("pwd-login"))},{default:n(()=>[v("返回 ")]),_:1})])]),_:1})]),_:1},8,["model"])}}}),_t=se(pt,[["__scopeId","data-v-b23bc49f"]]),ft={class:"flex-y-center w-full"},mt=s("div",{class:"w-18px"},null,-1),ht={class:"flex"},vt=s("div",{class:"w-12px"},null,-1),gt={key:1},wt=U({__name:"index",setup(c){const{register_verify:u,email:r}=K(),{toLoginModule:f}=O(),{label:m,isCounting:g,loading:i,getSmsCode:w}=ae(),t=S(),{forgetPassword:d}=q(),o=D({phone:"",code:"",pwd:"",token:"",server:"",confirmPwd:"",from:"forget"}),k=S(!1),C={phone:T.phone,code:T.code,pwd:T.pwd,confirmPwd:Ce($e(o).pwd)};function z(){var x;if(o.token===""||o.server===""){(x=window.$message)==null||x.error("请填写手机号并完成手势验证");return}w(o)}async function L(){var x;await((x=t.value)==null?void 0:x.validate()),k.value=!0,await d(o).finally(()=>{k.value=!1})}return(x,p)=>{const a=F,_=Q,$=G,N=J,H=He;return l(u)?(y(),R(N,{key:0,ref_key:"formRef",ref:t,model:o,rules:C,size:"large","show-label":!1},{default:n(()=>[e(_,{path:"phone"},{default:n(()=>[e(a,{value:o.phone,"onUpdate:value":p[0]||(p[0]=b=>o.phone=b),placeholder:"手机号码"},null,8,["value"])]),_:1}),e(_,{path:"token"},{default:n(()=>[e(l(re),{server:o.server,token:o.token,"onUpdate:token":p[1]||(p[1]=b=>o.token=b),"onUpdate:server":p[2]||(p[2]=b=>o.server=b)},null,8,["server","token"])]),_:1}),e(_,{path:"code"},{default:n(()=>[s("div",ft,[e(a,{value:o.code,"onUpdate:value":p[3]||(p[3]=b=>o.code=b),placeholder:"验证码"},null,8,["value"]),mt,e($,{size:"large",disabled:l(g),loading:l(i),onClick:z},{default:n(()=>[v(M(l(m)),1)]),_:1},8,["disabled","loading"])])]),_:1}),e(_,{path:"pwd"},{default:n(()=>[e(a,{value:o.pwd,"onUpdate:value":p[4]||(p[4]=b=>o.pwd=b),type:"password","show-password-on":"click",placeholder:"密码"},null,8,["value"])]),_:1}),e(_,{path:"confirmPwd"},{default:n(()=>[e(a,{value:o.confirmPwd,"onUpdate:value":p[5]||(p[5]=b=>o.confirmPwd=b),type:"password","show-password-on":"click",placeholder:"确认密码"},null,8,["value"])]),_:1}),s("div",ht,[e($,{style:{flex:"1"},loading:k.value,type:"primary",size:"large",block:!0,round:!0,onClick:L},{default:n(()=>[v("确定 ")]),_:1},8,["loading"]),vt,e($,{style:{flex:"1"},size:"large",block:!0,round:!0,onClick:p[6]||(p[6]=b=>l(f)("pwd-login"))},{default:n(()=>[v("返回 ")]),_:1})])]),_:1},8,["model"])):(y(),B("div",gt,[e(H,null,{default:n(()=>[v("本站暂未开启找回密码功能")]),_:1}),e(H,null,{default:n(()=>[v("请联系管理员："+M(l(r)),1)]),_:1}),e($,{style:{flex:"1"},size:"large",block:!0,round:!0,onClick:p[7]||(p[7]=b=>l(f)("pwd-login"))},{default:n(()=>[v("返回 ")]),_:1})]))}}}),bt=["src"],yt={class:"flex-y-center justify-between mt-32px"},xt=s("div",{class:"w-12px"},null,-1),kt=U({__name:"index",setup(c){const{toLoginModule:u}=O(),r=S({url:"",ticket:""}),f=D({fetchCode:!0}),m=S(null),g=S();ze().then(w=>{r.value=w.data,f.fetchCode=!1,m.value=setInterval(()=>{Re(r.value.ticket).then(t=>{console.log(t.data),t.data.code===200&&(q().handleActionAfterLogin(t.data),clearInterval(m.value))})},1e3)}),le(()=>{clearInterval(m.value)});async function i(){var w,t;await((w=g.value)==null?void 0:w.validate()),(t=window.$message)==null||t.success("验证成功!")}return(w,t)=>{const d=Be,o=G;return y(),B("div",null,[e(d,{style:{height:"200px"},show:f.fetchCode},{description:n(()=>[v(" 二维码加载中")]),default:n(()=>[s("img",{style:{height:"220px",margin:"auto"},src:"https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket="+r.value.ticket,alt:"请稍等"},null,8,bt)]),_:1},8,["show"]),s("div",yt,[e(o,{class:"flex-1",type:"primary",size:"large",round:!0,onClick:i},{default:n(()=>[v("确定")]),_:1}),xt,e(o,{class:"flex-1",size:"large",round:!0,onClick:t[0]||(t[0]=k=>l(u)("pwd-login"))},{default:n(()=>[v("返回")]),_:1})])])}}}),Ct=""+new URL("login_bg-1691429277723.png",import.meta.url).href,$t=""+new URL("login_bg_dark-1691429277723.png",import.meta.url).href,zt=["src"],Rt={class:"input_box"},St={class:"w-300px sm:w-360px form_content"},Ut={class:"flex-y-center justify-between"},Lt={class:"pt-24px"},Mt={class:"text-18px text-primary font-medium"},It={class:"pt-24px"},Pt={key:1,class:"absolute-lt z-1 wh-full overflow-hidden",style:{"background-color":"#252525"}},Tt=U({__name:"index",props:{module:null},setup(c){const u=c,r=Se(),{name:f}=K(),m=[{key:"pwd-login",label:I["pwd-login"],component:rt},{key:"register",label:I.register,component:_t},{key:"reset-pwd",label:I["reset-pwd"],component:wt},{key:"bind-wechat",label:I["bind-wechat"],component:kt}],g=P(()=>{const d={...m[0]},o=m.find(k=>k.key===u.module);return o&&Object.assign(d,o),d}),i=P(()=>r.darkMode?W(r.themeColor,7):r.themeColor),w=P(()=>{const d="#ffffff",o=r.darkMode?.5:.2;return Ue(d,r.themeColor,o)}),t=Te.debounce(()=>{const d=document.querySelector(".form_content");(d==null?void 0:d.scrollHeight)>d.clientHeight?(d.style.display="block",d.style.padding="10px 0px"):d.style.display="flex"},200);return window.addEventListener("resize",t),le(()=>{window.removeEventListener("resize",t)}),(d,o)=>{const k=Ie,C=qe,z=Pe;return y(),B("div",{class:"relative flex-center wh-full",style:Y({backgroundColor:w.value})},[e(z,{bordered:!1,size:"large",class:"z-4 !w-auto rounded-20px shadow-sm",style:Y({backgroundColor:l(r).darkMode?"#303030":"#fff"})},{default:n(()=>[s("div",null,[s("img",{src:l(r).darkMode?l($t):l(Ct),alt:"",class:"bg_img"},null,8,zt)]),s("div",Rt,[s("div",St,[s("header",Ut,[e(k,{style:{width:"50px"},class:"text-64px text-primary"}),e(C,{type:"primary",size:28},{default:n(()=>[v(M(l(f)),1)]),_:1})]),s("main",Lt,[s("h3",Mt,M(g.value.label),1),s("div",It,[e(Le,{name:"fade-slide",mode:"out-in",appear:""},{default:n(()=>[(y(),R(Me(g.value.component)))]),_:1})])])])])]),_:1},8,["style"]),l(r).darkMode?(y(),B("div",Pt)):(y(),R(l(nt),{key:0,"theme-color":i.value},null,8,["theme-color"]))],4)}}});const Et=se(Tt,[["__scopeId","data-v-1819e9ef"]]);export{Et as default};
